generator client {
    provider = "prisma-client-js"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Line {
  id                      String                     @id @default(uuid())
  name                    String                     @unique
  password                String?
  barangay                Barangay                  @relation(fields: [barangayId], references: [id])
  barangayId              String
  municipal               Municipal                 @relation(fields: [municipalId], references: [id])
  municipalId             String
  province                Province                  @relation(fields: [provinceId], references: [id])
  provinceId              String
  region                  Region                    @relation(fields: [regionId], references: [id])
  regionId                String
  createdAt               DateTime                   @default(now())
  status                  Int                        @default(1)
  Department              Department[]
  Account                 Account[]
  User                    User[]
  Position                Position[]
  SalaryGrade             SalaryGrade[]
  Announcement            Announcement[]
  BirthdayNoticeResponse  BirthdayNoticeResponse[]
  InvitationLink          InvitationLink[]
  Supplies                Supplies[]
  SupplyBatchOrder        SupplyBatchOrder[]
  Group                   Group[]
  AdminProfile            AdminProfile?             @relation(fields: [adminProfileId], references: [id])
  adminProfileId          String?
  InventoryBox            InventoryBox[]
  SuppliesDataSet         SuppliesDataSet[]
  Supplier                Supplier[]
  HumanResourcesLogs      HumanResourcesLogs[]
  SubmittedApplication    SubmittedApplication[]
  ApplicationResponse     ApplicationResponse[]
  ApplicationConversation ApplicationConversation[]
  MessageTemplate         MessageTemplate[]
  InventoryInboxItems     InventoryInboxItems[]
  MedicineStorage         MedicineStorage[]
  Medicine                Medicine[]
  MedicineLogs            MedicineLogs[]
  MedicineTransaction     MedicineTransaction[]
  MedicineStock           MedicineStock[]
  Prescription            Prescription[]
  MedicineNotification    MedicineNotification[]
  applications            Application[]
  lineGeneralAssets       LineGeneralAssets[]
  unitPositions           UnitPosition[]
  jobPosts                JobPost[]
}

model InvitationLink {
  id        String     @id @default(uuid())
  code      String     @unique
  createdAt DateTime   @default(now())
  expiresAt DateTime?
  used      Boolean    @default(false)
  url       String
  line      Line      @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId    String
  status    Int        @default(1)
  message   String?
}

model Assets {
  id                 String                    @id @default(uuid())
  url                String
  fileSize           String
  fileType           String
  fileName           String
  createdAt          DateTime                  @default(now())
  Supplies           Supplies?                @relation(fields: [suppliesId], references: [id])
  suppliesId         String?
  ProfilePicture     ProfilePicture[]
  SupplyOrderSupport SupplyOrderSupportFile[]
}

model ProfilePicture {
  id        String    @id @default(uuid())
  asset     Assets   @relation(fields: [assetsId], references: [id])
  assetsId  String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String    @unique
  createdAt DateTime  @default(now())
}

// Model for supplies management
model InventoryBox {
  id                   String                  @id @default(uuid())
  name                 String                  @unique
  code                 Int                     @unique
  createdAt            DateTime                @default(now())
  batch                SupplyBatchOrder[]
  line                 Line                   @relation(fields: [lineId], references: [id])
  lineId               String
  createdBy            User                   @relation(name: "createdBy", fields: [userId], references: [id])
  userId               String
  unit                 Department?            @relation(fields: [departmentId], references: [id])
  departmentId         String?
  InventoryAccessLogs  InventoryAccessLogs[]
  SupplyBatch          SupplyBatch[]
  ContainerAllowedUser ContainerAllowedUser[]
  SuppliesDataSet      SuppliesDataSet[]
  supplies             Supplies[]
  SupplyStockTrack     SupplyStockTrack[]
}

model InventoryInbox {
  id String  @id @default(uuid())
}

model InventoryInboxItems {
  id        String    @id @default(uuid())
  line      Line     @relation(fields: [lineId], references: [id])
  view      Boolean   @default(false)
  type      Int       @default(0)
  message   String?
  subject   String?
  path      String?
  timestamp DateTime  @default(now())
  lineId    String
}

model ContainerAllowedUser {
  id             String        @id @default(uuid())
  user           User?        @relation(fields: [userId], references: [id], onDelete: SetNull)
  userId         String?
  container      InventoryBox @relation(fields: [inventoryBoxId], references: [id])
  inventoryBoxId String
  grantBy        User         @relation(name: "GrantBy", fields: [grantByUserId], references: [id])
  grantByUserId  String
  timestamp      DateTime      @default(now())
}

model InventoryAccessLogs {
  id             String         @id @default(uuid())
  user           User?         @relation(fields: [userId], references: [id], onDelete: SetNull)
  userId         String?
  timestamp      DateTime       @default(now())
  box            InventoryBox? @relation(fields: [inventoryBoxId], references: [id], onDelete: SetNull)
  inventoryBoxId String?
  action         String         @default("Viewed")
  supply         Supplies?     @relation(fields: [suppliesId], references: [id], onDelete: SetNull)
  suppliesId     String?
  path           String?
}

model SupplyIncharge {
  id               String              @id @default(uuid())
  unit             Department         @relation(fields: [departmentId], references: [id])
  user             User?              @relation(fields: [userId], references: [id])
  createdAt        DateTime            @default(now())
  departmentId     String
  userId           String?
  SupplyBatchOrder SupplyBatchOrder[]
}

model Supplies {
  id                    String                   @id @default(uuid())
  code                  Int                      @unique @default(autoincrement())
  consumable            Boolean                  @default(true)
  item                  String
  description           String?                  @default("N/A")
  quantity              Int                      @default(1)
  notifyAtStockOf       Int                      @default(10)
  price                 Float                    @default(0.0)
  createdAt             DateTime                 @default(now())
  updatedAt             DateTime                 @updatedAt
  line                  Line                    @relation(fields: [lineId], references: [id])
  lineId                String
  user                  User?                   @relation(fields: [userId], references: [id])
  userId                String?
  condition             String?                  @default("New") // e.g., "New", "Used", etc.
  status                String?                  @default("Available") // e.g., "Available", "
  SuppliesRecord        SuppliesRecord[]
  asset                 Assets[]
  Part                  SuppliesRecord?         @relation("Part")
  TransferredSupplies   TransferredSupplies[]
  SuppliesCategory      SuppliesCategory?       @relation(fields: [suppliesCategoryId], references: [id])
  suppliesCategoryId    String?
  SupplieRecieveHistory SupplieRecieveHistory[]
  InventoryAccessLogs   InventoryAccessLogs[]
  SupplyOrder           SupplyOrder[]
  SupplyBatchItem       SupplyBatchItem?
  SupplyPriceTrack      SupplyPriceTrack[]
  SuppliesQuality       SuppliesQuality?        @relation(fields: [suppliesQualityId], references: [id])
  suppliesQualityId     String?
  SupplyStockTrack      SupplyStockTrack[]
  SuppliesDataSet       SuppliesDataSet?        @relation(fields: [suppliesDataSetId], references: [id], onDelete: Cascade)
  suppliesDataSetId     String?
  SupplyBrand           SupplyBrand[]
  SupplyOrderItemReturn SupplyOrderItemReturn[]
  refNumber             String?                  @unique
  Supplier              Supplier?               @relation(fields: [supplierId], references: [id])
  supplierId            String?
  InventoryBox          InventoryBox?           @relation(fields: [inventoryBoxId], references: [id])
  inventoryBoxId        String?
}

model SupplyBrand {
  id                    String                   @id @default(uuid())
  supply                Supplies?               @relation(fields: [suppliesId], references: [id])
  suppliesId            String?
  SupplyOrderItemReturn SupplyOrderItemReturn[]
  timestamp             DateTime                 @default(now())
  SupplyStockTrack      SupplyStockTrack?       @relation(fields: [supplyStockTrackId], references: [id])
  supplyStockTrackId    String?
  brand                 String?                  @default("N/A")
  model                 String?                  @default("N/A")
}

model SupplyBatch {
  id                String               @id @default(uuid())
  timestamp         DateTime             @default(now())
  title             String
  box               InventoryBox        @relation(fields: [inventoryBoxId], references: [id])
  inventoryBoxId    String
  SupplyBatchItem   SupplyBatchItem[]
  SuppliesDataSet   SuppliesDataSet?    @relation(fields: [suppliesDataSetId], references: [id], onDelete: SetNull)
  suppliesDataSetId String?
  SupplyBatchOrder  SupplyBatchOrder[]
  SupplyBatchAccess SupplyBatchAccess[]
  SupplyStockTrack  SupplyStockTrack[]
}

model SupplyBatchAccess {
  id            String       @id @default(uuid())
  batch         SupplyBatch @relation(fields: [supplyBatchId], references: [id], onDelete: Cascade)
  supplyBatchId String
  user          User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId        String
  privilege     Int          @default(0)
  timestamp     DateTime     @default(now())
}

model SupplyBatchItem {
  id            String       @id @default(uuid())
  batch         SupplyBatch @relation(fields: [supplyBatchId], references: [id])
  supply        Supplies?   @relation(fields: [suppliesId], references: [id], onDelete: SetNull)
  supplyBatchId String
  suppliesId    String?      @unique
  timestamp     DateTime     @default(now())
}

model SupplyBatchOrder {
  id                String                    @id @default(uuid())
  timestamp         DateTime                  @default(now())
  title             String?                   @default("N/A")
  user              User?                    @relation(fields: [userId], references: [id])
  userId            String?
  status            Int                       @default(0)
  order             SupplyOrder[]
  files             SupplyOrderSupportFile[]
  line              Line?                    @relation(fields: [lineId], references: [id])
  lineId            String?
  InventoryBox      InventoryBox?            @relation(fields: [inventoryBoxId], references: [id])
  inventoryBoxId    String?
  SupplyOrderReturn SupplyOrderReturn[]
  batch             SupplyBatch?             @relation(fields: [supplyBatchId], references: [id])
  refNumber         String                    @unique
  supplyBatchId     String?
  approvedAt        DateTime?
  inventoryInCharge SupplyIncharge?          @relation(fields: [supplyInchargeId], references: [id])
  supplyInchargeId  String?
  remark            Int                       @default(0)
  comments          String                    @default("N/A")
}

model Supplier {
  id               String              @id @default(cuid())
  name             String              @unique
  line             Line               @relation(fields: [lineId], references: [id])
  supplies         Supplies[]
  timestamp        DateTime            @default(now())
  lineId           String
  SupplyStockTrack SupplyStockTrack[]
  SupplyOrder      SupplyOrder?
}

model SupplyOrderSupportFile {
  id                 String             @id @default(uuid())
  file               Assets            @relation(fields: [assetsId], references: [id])
  assetsId           String
  SupplyBatchOrder   SupplyBatchOrder? @relation(fields: [supplyBatchOrderId], references: [id])
  supplyBatchOrderId String?
}

model SupplyOrder {
  id                    String                  @id @default(cuid())
  desc                  String?                 @default("None")
  SupplyBatchOrder      SupplyBatchOrder?      @relation(fields: [supplyBatchOrderId], references: [id])
  supplyBatchOrderId    String?
  supply                Supplies               @relation(fields: [suppliesId], references: [id])
  suppliesId            String
  quantity              Int                     @default(1)
  unit                  SuppliesQuality        @relation(fields: [suppliesQualityId], references: [id])
  status                String                  @default("Drafted")
  suppliesQualityId     String
  subject               String?                 @default("None")
  refNumber             String                  @unique
  remark                Int                     @default(1) // 1 for none, 2 for approved, 3 for rejected
  condition             String?                 @default("New")
  comments              String?                 @default("N/A")
  timestamp             DateTime?               @default(now())
  price                 Float?                  @default(0.0)
  supplier              Supplier?              @relation(fields: [supplierId], references: [id])
  SupplyOrderItemReturn SupplyOrderItemReturn?
  supplierId            String?                 @unique
  SupplyOrderStatus     SupplyOrderStatus[]
}

model SupplyOrderStatus {
  id            String       @id @default(uuid())
  phase         Int          @default(0)
  order         SupplyOrder @relation(fields: [supplyOrderId], references: [id])
  supplyOrderId String
  timestamp     DateTime     @default(now())
  user          User        @relation(fields: [userId], references: [id])
  userId        String
  desc          String?
}

model SupplyOrderReturn {
  id                 String                   @id @default(uuid())
  batchOrder         SupplyBatchOrder        @relation(fields: [supplyBatchOrderId], references: [id], onDelete: Cascade)
  supplyBatchOrderId String
  status             Int                      @default(0)
  timestamp          DateTime                 @default(now())
  message            String?                  @default("N/A")
  item               SupplyOrderItemReturn[]
}

model SupplyOrderItemReturn {
  id                  String              @id @default(uuid())
  supply              Supplies?          @relation(fields: [suppliesId], references: [id], onDelete: SetNull)
  SupplyOrderReturn   SupplyOrderReturn? @relation(fields: [supplyOrderReturnId], references: [id], onDelete: Cascade)
  supplyOrderReturnId String?
  brand               SupplyBrand?       @relation(fields: [supplyBrandId], references: [id], onDelete: SetNull)
  supplyBrandId       String?
  suppliesId          String?
  quantity            Int                 @default(1)
  orderItem           SupplyOrder?       @relation(fields: [supplyOrderId], references: [id])
  supplyOrderId       String?             @unique
}

model SuppliesDataSet {
  id             String             @id @default(cuid())
  title          String             @unique
  unit           SuppliesQuality[]
  line           Line              @relation(fields: [lineId], references: [id])
  timestamp      DateTime           @default(now())
  lineId         String
  container      InventoryBox      @relation(fields: [inventoryBoxId], references: [id], onDelete: Cascade)
  inventoryBoxId String
  list           SupplyBatch[]
  supplies       Supplies[]
}

model SuppliesQuality {
  id                String            @id @default(cuid())
  quality           String            @unique
  perQuality        Int               @default(0)
  supplies          Supplies[]
  SuppliesDataSet   SuppliesDataSet? @relation(fields: [suppliesDataSetId], references: [id])
  suppliesDataSetId String?
  SupplyOrder       SupplyOrder[]
}

model SupplyPriceTrack {
  id                 String             @id @default(uuid())
  value              Int                @default(0)
  supply             Supplies          @relation(fields: [suppliesId], references: [id], onDelete: Cascade)
  suppliesId         String
  timestamp          DateTime           @default(now())
  SupplyStockTrack   SupplyStockTrack? @relation(fields: [supplyStockTrackId], references: [id])
  supplyStockTrackId String?
  period             String             @default("0:0")
}

model SupplyStockTrack {
  id                   String                  @id @default(uuid())
  stock                Int                     @default(0)
  supply               Supplies               @relation(fields: [suppliesId], references: [id], onDelete: Cascade)
  suppliesId           String
  timestamp            DateTime                @default(now())
  list                 SupplyBatch?           @relation(fields: [supplyBatchId], references: [id])
  supplyBatchId        String?
  inventoryBox         InventoryBox?          @relation(fields: [inventoryBoxId], references: [id])
  inventoryBoxId       String?
  expiration           DateTime?
  supplier             Supplier?              @relation(fields: [supplierId], references: [id])
  price                SupplyPriceTrack[]
  brand                SupplyBrand[]
  SupplyDispenseRecord SupplyDispenseRecord[]
  supplierId           String?
}

model SupplyDispenseRecord {
  id                 String            @id @default(uuid())
  user               User?            @relation(fields: [userId], references: [id])
  userId             String?
  unit               Department?      @relation(fields: [departmentId], references: [id])
  departmentId       String?
  quantity           String            @default("0")
  supply             SupplyStockTrack @relation(fields: [supplyStockTrackId], references: [id])
  supplyStockTrackId String
  timestamp          DateTime          @default(now())
  remarks            String            @default("N/A")
}

model SuppliesCategory {
  id          String      @id @default(uuid())
  name        String      @unique
  description String?
  createdAt   DateTime    @default(now())
  supplies    Supplies[]
}

model SupplieRecieveHistory {
  id         String    @id @default(uuid())
  supply     Supplies @relation(fields: [suppliesId], references: [id], onDelete: Cascade)
  suppliesId String
  userId     String
  timestamp  DateTime  @default(now())
  quantity   Int       @default(0)
  condition  String?   @default("New")
}

model TransferredSupplies {
  id              String     @id @default(uuid())
  supply          Supplies? @relation(fields: [suppliesId], references: [id])
  suppliesId      String?
  user            User      @relation(fields: [userId], references: [id])
  userId          String
  transferredTo   User      @relation(name: "transferTo", fields: [transferredToId], references: [id])
  transferredToId String
  timestamp       DateTime   @default(now())
  condition       Int        @default(1)
}

model SuppliesRecord {
  id          String     @id @default(uuid())
  suppyId     Supplies  @relation(fields: [suppliesId], references: [id], onDelete: Cascade)
  suppliesId  String
  timestamp   DateTime   @default(now())
  user        User      @relation(fields: [userId], references: [id])
  userId      String
  action      String
  status      Int        @default(1)
  description String?
  modified    Supplies? @relation(name: "Part", fields: [modifiedId], references: [id])
  modifiedId  String?    @unique
}

model MessageTemplate {
  id          String         @id @default(uuid())
  module      Int
  platform    String?
  message     String
  messageIv   String?
  subject     String
  subjectIv   String
  link        String?
  line        Line          @relation(fields: [lineId], references: [id])
  timestamp   DateTime       @default(now())
  MessageLogs MessageLogs[]
  lineId      String
}

model MessageLogs {
  id                String            @id @default(uuid())
  ref               String?
  number            String
  content           String?
  template          MessageTemplate? @relation(fields: [messageTemplateId], references: [id])
  timestamp         DateTime?         @default(now())
  messageTemplateId String
  status            Int               @default(0)
}

model Application {
  id        String    @id @default(uuid())
  userId    String
  line      Line     @relation(fields: [lineId], references: [id])
  status    String    @default("pending") // e.g., "pending", "approved", "rejected"
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  jobPost   JobPost? @relation(fields: [jobPostId], references: [id])
  jobPostId String?
  lineId    String
}

model SubmittedApplication {
  id                      String                     @id @default(uuid())
  lastname                String
  lastnameIv              String
  firstname               String
  firsntameIv             String
  middleName              String?                    @default("N/A")
  middleNameIv            String?
  suffix                  String?                    @default("N/A")
  birthDate               String
  bdayIv                  String?
  email                   String
  emailIv                 String?
  gender                  String
  filipino                Boolean
  dualCitizen             Boolean
  byBirth                 Boolean
  byNatural               Boolean
  dualCitizenHalf         String
  cvilStatus              String
  cvilStatusIv            String?
  reshouseBlock           String?                    @default("N/A")
  reshouseBlockIv         String?
  resStreet               String?                    @default("N/A")
  resStreetIv             String?
  resSub                  String?                    @default("N/A")
  resBarangay             String
  resBarangayIv           String?
  resCity                 String
  resCityIv               String?
  resProvince             String
  resProvinceIv           String?
  resZipCode              String
  resZipCodeIv            String?
  permahouseBlock         String?                    @default("N/A")
  permahouseBlockIv       String?
  permaStreet             String?                    @default("N/A")
  permaStreetIv           String?
  permaSub                String?                    @default("N/A")
  permaSubIv              String?
  permaBarangay           String
  permaBarangayIv         String?
  permaCity               String
  permaCityIv             String?
  permaProvince           String
  permaProvinceIv         String?
  permaZipCode            String
  permaZipCodeIv          String?
  teleNo                  String
  mobileNo                String
  ivMobileNo              String
  height                  Float
  weight                  Float
  bloodType               String?                    @default("N/A")
  umidNo                  String?                    @default("N/A")
  umidNoIv                String?
  pagIbigNo               String?                    @default("N/A")
  pagIbigNoIv             String?
  philHealthNo            String?                    @default("N/A")
  philHealthNoIv          String?
  philSys                 String?                    @default("N/A")
  philSysIv               String?
  tinNo                   String?                    @default("N/A")
  tinNoIv                 String?
  agencyNo                String?                    @default("N/A")
  agencyNoIv              String?
  spouseSurname           String?                    @default("N/A")
  spouseSurnameIv         String?
  spouseFirstname         String?                    @default("N/A")
  spouseFirstnameIv       String?
  spouseMiddle            String?                    @default("N/A")
  spouseMiddleIv          String?
  spouseBusinessAddress   String?                    @default("N/A")
  spouseTelephone         String?                    @default("N/A")
  fatherSurname           String?                    @default("N/A")
  fatherSurnameIv         String?
  fatherFirstname         String?                    @default("N/A")
  fatherFirstnameIv       String?
  fatherMiddlename        String?                    @default("N/A")
  fatherMiddlenameIv      String?
  fatherOccupation        String?                    @default("N/A")
  fatherOccupationIv      String?
  fatherAge               Int
  fatherBirthday          DateTime?
  fatherSuffix            String?                    @default("N/A")
  motherSurname           String?                    @default("N/A")
  motherSurnameIv         String?
  motherFirstname         String?                    @default("N/A")
  motherFirstnameIv       String?
  motherMiddlename        String?                    @default("N/A")
  motherMiddlenameIv      String?
  motherOccupation        String?                    @default("N/A")
  motherAge               Int
  motherBirthday          DateTime?
  children                String
  childrenIv              String?
  elementary              Json?
  secondary               Json?
  vocational              Json?
  college                 Json?
  graduateCollege         Json?
  civilService            Json[]
  experience              Json[]
  voluntaryWork           Json[]
  learningDev             Json[]
  otherInfo               Json[]
  references              Json[]
  govId                   Json
  govIdIv                 String?
  status                  Int                        @default(0)
  progress                ApplicationProgress[]
  line                    Line                      @relation(fields: [lineId], references: [id])
  lineId                  String
  ApplicationResponse     ApplicationResponse[]
  profilePic              ApplicationProfilePic?    @relation(fields: [applicationProfilePicId], references: [id])
  applicationProfilePicId String?                    @unique
  fileAttached            ApplicationAttachedFile[]
  timestamp               DateTime                   @default(now())
  ApplicationConversation ApplicationConversation[]
  batch                   DateTime
  forPosition             Position?                 @relation(fields: [positionId], references: [id])
  positionId              String?
  ApplicationSkillTags    ApplicationSkillTags[]
}

model ApplicationProgress {
  id                     String                 @id @default(uuid())
  step                   Int                    @default(0)
  timestamp              DateTime               @default(now())
  submittedApplication   SubmittedApplication? @relation(fields: [submittedApplicationId], references: [id])
  submittedApplicationId String?
}

model ApplicationSkillTags {
  id                     String                @id @default(uuid())
  tags                   String?
  applicant              SubmittedApplication @relation(fields: [submittedApplicationId], references: [id])
  submittedApplicationId String
  timestamp              DateTime              @default(now())
}

model ApplicationAttachedFile {
  id                     String                 @id @default(uuid())
  file_url               String
  file_url_Iv            String
  file_name              String
  file_type              Int
  file_size              String
  timestamp              DateTime               @default(now())
  SubmittedApplication   SubmittedApplication? @relation(fields: [submittedApplicationId], references: [id])
  submittedApplicationId String?
}

model ApplicationProfilePic {
  id                   String                 @id @default(uuid())
  file_url             String
  file_url_Iv          String?
  file_name            String
  file_type            Int
  file_size            String
  timestamp            DateTime               @default(now())
  SubmittedApplication SubmittedApplication?
}

model ApplicationConvoAsset {
  id                        String                    @id @default(uuid())
  file_url                  String
  file_name                 String
  file_type                 Int
  file_size                 String
  timestamp                 DateTime                  @default(now())
  ApplicationConversation   ApplicationConversation? @relation(fields: [applicationConversationId], references: [id])
  applicationConversationId String?
}

model ApplicationResponseAsset {
  id                    String                @id @default(uuid())
  file_url              String
  file_name             String
  file_type             Int
  file_size             String
  timestamp             DateTime              @default(now())
  ApplicationResponse   ApplicationResponse? @relation(fields: [applicationResponseId], references: [id])
  applicationResponseId String?
}

model ApplicationResponse {
  id                     String                      @id @default(uuid())
  line                   Line                       @relation(fields: [lineId], references: [id])
  message                String
  messageIv              String?
  title                  String
  titleIv                String?
  from                   User                       @relation(name: "from", fields: [userId], references: [id])
  application            SubmittedApplication       @relation(fields: [submittedApplicationId], references: [id])
  timestmap              DateTime                    @default(now())
  submittedApplicationId String
  lineId                 String
  userId                 String
  assets                 ApplicationResponseAsset[]
}

model ApplicationConversation {
  id                     String                   @id @default(uuid())
  message                String
  messageIv              String
  title                  String
  hrAdmin                User                    @relation(name: "hrAdminResponse", fields: [userId], references: [id])
  timestamp              DateTime                 @default(now())
  applicant              SubmittedApplication    @relation(fields: [submittedApplicationId], references: [id])
  userId                 String
  line                   Line                    @relation(fields: [lineId], references: [id])
  submittedApplicationId String
  lineId                 String
  assets                 ApplicationConvoAsset[]
}

model Department {
  id                   String                  @id @default(uuid())
  name                 String                  @unique
  email                String?
  description          String?
  createdAt            DateTime                @default(now())
  head                 User?                  @relation(name: "DepartmentHead", fields: [headId], references: [id], onDelete: SetNull)
  headId               String?                 @unique
  users                User[]                 @relation(name: "DepartmentMembers")
  idCode               String?                 @default("N/A")
  line                 Line?                  @relation(fields: [lineId], references: [id])
  lineId               String?
  Position             Position[]
  Announcement         Announcement[]
  Group                Group[]
  InventoryBox         InventoryBox[]
  SupplyDispenseRecord SupplyDispenseRecord[]
  SignatureQueueRoom   SignatureQueueRoom[]
  SupplyIncharge       SupplyIncharge[]
  MedicineStorage      MedicineStorage[]
  MedicineNotification MedicineNotification[]
  unitPositions        UnitPosition[]
}

model Group {
  id           String      @id @default(uuid())
  unit         Department @relation(fields: [departmentId], references: [id])
  departmentId String
  users        User[]
  name         String?     @default("N/A")
  createdAt    DateTime    @default(now())
  line         Line?      @relation(fields: [lineId], references: [id])
  lineId       String?
  chief        User?      @relation(name: "Chief", fields: [userId], references: [id])
  userId       String?
}

model Admin {
  id       String  @id @default(uuid())
  username String
  password String
}

model AdminProfile {
  id       String  @id @default(uuid())
  username String
  line     Line[]
}

model Account {
  id        String    @id @default(uuid())
  username  String
  password  String
  createdAt DateTime  @default(now())
  User      User?
  status    Int       @default(1) // 1 for active, 0 for inactive
  role      String    @default("user") // e.g., "admin", "user", etc.
  active    Boolean   @default(true)
  line      Line?    @relation(fields: [lineId], references: [id], onDelete: SetNull)
  lineId    String?
}

model Privilege {
  id             String   @id @default(uuid())
  humanResources Boolean  @default(false)
  inventory      Boolean  @default(false)
  User           User?
  super          Boolean  @default(false)
}

model User {
  id                         String                        @id @default(uuid())
  firstName                  String
  firstNameIv                String?
  lastName                   String
  lastNameIv                 String?
  middleName                 String?
  suffix                     String?
  birthDate                  DateTime?
  email                      String
  emailIv                    String?
  username                   String                        @unique
  usernameIv                 String?
  gender                     String?                       @default("--/--")
  profilePicture             String?
  createdAt                  DateTime                      @default(now())
  level                      Int                           @default(1)
  type                       String                        @default("M")
  step                       Int                           @default(1)
  status                     String                        @default("Regular")
  statusIV                   String?
  phoneNumber                String?
  phoneNumberIv              String?
  sentNotifications          Notification[]               @relation("SentNotifications")
  receivedNotifications      Notification[]               @relation("ReceivedNotifications")
  department                 Department?                  @relation(name: "DepartmentMembers", fields: [departmentId], references: [id], onDelete: SetNull)
  departmentId               String?
  headedDepartment           Department?                  @relation(name: "DepartmentHead")
  Position                   Position?                    @relation(fields: [positionId], references: [id], onDelete: SetNull)
  positionId                 String?
  SalaryGrade                SalaryGrade?                 @relation(fields: [salaryGradeId], references: [id], onDelete: SetNull)
  salaryGradeId              String?
  Leave                      Leave[]
  Announcement               Announcement[]
  account                    Account?                     @relation(fields: [accountId], references: [id])
  accountId                  String?                       @unique
  Promotions                 Promotion[]
  bdaySender                 BirthdayNoticeResponse[]     @relation("Sender")
  bdayRecipient              BirthdayNoticeResponse[]     @relation("Recipient")
  region                     Region?                      @relation(fields: [regionId], references: [id])
  regionId                   String?
  province                   Province?                    @relation(fields: [provinceId], references: [id])
  municipal                  Municipal?                   @relation(fields: [municipalId], references: [id])
  municipalId                String?
  provinceId                 String?
  barangay                   Barangay?                    @relation(fields: [barangayId], references: [id])
  barangayId                 String?
  PositionSlot               PositionSlot?
  Accomplishment             Accomplishment[]
  headResponse               AccomplishmentResponse[]     @relation("Head")
  line                       Line?                        @relation(fields: [lineId], references: [id], onDelete: SetNull)
  lineId                     String?
  Supplies                   Supplies[]
  SuppliesRecord             SuppliesRecord[]
  LogRecord                  LogRecord[]
  transferTo                 TransferredSupplies[]        @relation("transferTo")
  TransferredSupplies        TransferredSupplies[]
  ProfilePicture             ProfilePicture?
  Application                Application[]
  privilege                  Privilege?                   @relation(fields: [privilegeId], references: [id], onDelete: SetNull)
  privilegeId                String?                       @unique
  SupplyBatchOrder           SupplyBatchOrder[]
  Group                      Group?                       @relation(fields: [groupId], references: [id], onDelete: SetNull)
  groupId                    String?
  chief                      Group[]                      @relation("Chief")
  InventoryBox               InventoryBox[]               @relation("createdBy")
  InventoryAccessLogs        InventoryAccessLogs[]
  ContainerAllowedUser       ContainerAllowedUser[]
  GrantContainer             ContainerAllowedUser[]       @relation("GrantBy")
  SupplyBatchAccess          SupplyBatchAccess[]
  SupplyDispenseRecord       SupplyDispenseRecord[]
  SignatureQueueRoomApprover SignatureQueueRoomApprover[]
  SignatureQueueRoom         SignatureQueueRoom[]
  requestFrom                SignatureRequest[]           @relation("fromUser")
  requestTo                  SignatureRequest[]           @relation("toUser")
  Signature                  Signature[]
  UserKeyPair                UserKeyPair?
  SupplyIncharge             SupplyIncharge[]
  AdminInbox                 AdminInbox[]
  HumanResourcesLogs         HumanResourcesLogs[]
  ApplicationResponse        ApplicationResponse[]        @relation("from")
  ApplicationConversation    ApplicationConversation[]    @relation("hrAdminResponse")
  term                       DateTime?
  SalaryTransactionRecord    SalaryTransactionRecord[]
  SupplyOrderStatus          SupplyOrderStatus[]
  processBy                  Prescription[]               @relation("processBy")
  respondedBy                Prescription[]               @relation("respondedBy")
  MedicineLogs               MedicineLogs[]
  PrescriptionComment        PrescriptionComment[]
  prescriptionSender         PrescriptionComment[]        @relation("prescriptionSender")
  MedicineTransaction        MedicineTransaction[]
  MedicineStorageAccess      MedicineStorageAccess[]
  MedicineNotification       MedicineNotification[]

  @@index([departmentId], name: "department_idx")
  @@index([firstName,        lastName])
}

model SalaryTransactionRecord {
  id        String    @id @default(uuid())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  period    String
  periodIv  String
  timestamp DateTime  @default(now())
  value     String
  valueIv   String
}

model LogRecord {
  id        String    @id @default(uuid())
  userId    String
  action    String
  timestamp DateTime  @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Notification {
  id          String    @id @default(uuid())
  title       String
  content     String
  createdAt   DateTime  @default(now())
  recipientId String
  senderId    String
  sender      User     @relation("SentNotifications", fields: [senderId], references: [id], onDelete: Cascade)
  recipient   User     @relation("ReceivedNotifications", fields: [recipientId], references: [id], onDelete: Cascade)
  path        String?
  isRead      Boolean   @default(false)
}

model Position {
  id                   String                  @id @default(uuid())
  name                 String                  @unique
  description          String?
  fixToUnit            Boolean                 @default(false)
  max                  Int                     @default(0)
  createdAt            DateTime                @default(now())
  users                User[]
  itemNumber           String?                 @unique
  Promotion            Promotion[]
  SalaryGrade          SalaryGrade?           @relation(fields: [salaryGradeId], references: [id], onDelete: Cascade)
  salaryGradeId        String?
  plantilla            Boolean                 @default(false)
  PositionSlot         PositionSlot[]
  line                 Line?                  @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId               String?
  department           Department?            @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  departmentId         String?
  SubmittedApplication SubmittedApplication[]
  jobPosts             JobPost[]
  unitPositions        UnitPosition[]
}

model UnitPosition {
  id           String          @id @default(uuid())
  unit         Department     @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  fixToUnit    Boolean         @default(false)
  plantilla    Boolean         @default(false)
  itemNumber   String?         @default("N/A")
  departmentId String
  position     Position       @relation(fields: [positionId], references: [id], onDelete: Cascade)
  positionId   String
  designation  String?         @default("N/A")
  slot         PositionSlot[]
  line         Line           @relation(fields: [lineId], references: [id], onDelete: Cascade)
  timestamp    DateTime        @default(now())
  lineId       String
}

model PositionSlot {
  id             String         @id @default(uuid())
  designation    String?        @default("N/A")
  occupied       Boolean        @default(false)
  pos            Position?     @relation(fields: [positionId], references: [id])
  positionId     String?
  salaryGrade    SalaryGrade?  @relation(fields: [salaryGradeId], references: [id], onDelete: Cascade)
  salaryGradeId  String?
  user           User?         @relation(fields: [userId], references: [id], onDelete: SetNull)
  userId         String?        @unique
  unitPosition   UnitPosition? @relation(fields: [unitPositionId], references: [id], onDelete: Cascade)
  unitPositionId String?
}

model SalaryGrade {
  id                 String                @id @default(uuid())
  grade              Int
  amount             Float
  createdAt          DateTime              @default(now())
  users              User[]
  SalaryGradeHistory SalaryGradeHistory[]
  positions          Position[]
  PositionSlot       PositionSlot[]
  line               Line?                @relation(fields: [lineId], references: [id], onDelete: SetNull)
  lineId             String?
  jobPosts           JobPost[]
}

model HumanResourcesLogs {
  id        String    @id @default(uuid())
  tab       Int       @default(1)
  line      Line     @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId    String
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  action    String
  desc      String    @default("N/A")
  timestamp DateTime  @default(now())
}

model SalaryGradeHistory {
  id            String       @id @default(uuid())
  userId        String
  salaryGradeId String
  effectiveDate DateTime
  createdAt     DateTime     @default(now())
  amount        Int
  salaryGrade   SalaryGrade @relation(fields: [salaryGradeId], references: [id], onDelete: Cascade)
}

model Leave {
  id        String    @id @default(uuid())
  userId    String
  type      String
  startDate DateTime
  endDate   DateTime
  reason    String?
  status    String    @default("pending")
  createdAt DateTime  @default(now())
  user      User     @relation(fields: [userId], references: [id])
}

model Announcement {
  id           String       @id @default(uuid())
  title        String
  content      String
  createdAt    DateTime     @default(now())
  authorId     String
  author       User        @relation(fields: [authorId], references: [id], onDelete: Cascade)
  line         Line        @relation(fields: [lineId], references: [id])
  lineId       String
  path         String?
  important    Boolean      @default(true)
  unit         Department? @relation(fields: [departmentId], references: [id], onDelete: SetNull)
  departmentId String?
}

model Promotion {
  id         String    @id @default(uuid())
  User       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     String
  timestamp  DateTime  @default(now())
  postion    Position @relation(fields: [positionId], references: [id])
  positionId String
}

model BirthdayNoticeResponse {
  id          String    @id @default(uuid())
  message     String?
  Sender      User     @relation(name: "Sender", fields: [senderId], references: [id])
  like        Boolean   @default(false)
  timestamp   DateTime  @default(now())
  senderId    String
  Recipient   User?    @relation(name: "Recipient", fields: [recipientId], references: [id])
  recipientId String?
  line        Line     @relation(fields: [lineId], references: [id])
  lineId      String
}

model Region {
  id       String      @id
  name     String
  provices Province[]
  User     User[]
  Line     Line[]
}

model Province {
  id           String          @id
  name         String
  Region       Region?        @relation(fields: [regionId], references: [id])
  regionId     String?
  municipals   Municipal[]
  User         User[]
  Line         Line[]
  Prescription Prescription[]
}

model Municipal {
  id           String          @id
  name         String
  Province     Province?      @relation(fields: [provinceId], references: [id])
  provinceId   String?
  barangays    Barangay[]
  User         User[]
  Line         Line[]
  Prescription Prescription[]
}

model Barangay {
  id           String          @id
  name         String
  Municipal    Municipal?     @relation(fields: [municipalId], references: [id])
  municipalId  String?
  User         User[]
  Line         Line[]
  Prescription Prescription[]
}

model Accomplishment {
  id                     String                    @id @default(uuid())
  timestamp              DateTime                  @default(now())
  user                   User?                    @relation(fields: [userId], references: [id])
  userId                 String?
  start                  DateTime
  end                    DateTime
  task                   String
  AccomplishmentResponse AccomplishmentResponse[]
}

model AccomplishmentResponse {
  id               String          @id @default(uuid())
  head             User           @relation(name: "Head", fields: [headId], references: [id])
  headId           String
  accomplishment   Accomplishment @relation(fields: [accomplishmentId], references: [id])
  accomplishmentId String
  message          String
  timestamp        DateTime        @default(now())
}

model UserKeyPair {
  id                                            String    @id @default(uuid())
  user                                          User     @relation(fields: [userId], references: [id])
  userId                                        String    @unique
  publicKey  String // PEM or base64
  privateKey String // Encrypted before storing
  createdAt                                     DateTime  @default(now())
  updatedAt                                     DateTime  @updatedAt
}

model Signature {
  id        String    @id @default(uuid())
  user      User     @relation(fields: [userId], references: [id])
  title     String
  url       String
  defalt    Boolean   @default(false)
  timestamp DateTime  @default(now())
  userId    String
}

model SignatureAudit {
  id                   String              @id @default(uuid())
  message              String
  title                String
  timestamp            DateTime            @default(now())
  auditedId            String?             @default("")
  room                 SignatureQueueRoom @relation(fields: [signatureQueueRoomId], references: [id])
  signatureQueueRoomId String
}

model SignatureQueueRoom {
  id             String                        @id @default(uuid())
  user           User                         @relation(fields: [userId], references: [id])
  userId         String
  unit           Department                   @relation(fields: [departmentId], references: [id])
  departmentId   String
  timestamp      DateTime                      @default(now())
  endorser       SignatureQueueRoomApprover[]
  SignatureAudit SignatureAudit[]
}

model SignatureQueueRoomApprover {
  id                   String               @id @default(uuid())
  user                 User                @relation(fields: [userId], references: [id])
  userId               String
  timestamp            String
  SignatureQueueRoom   SignatureQueueRoom? @relation(fields: [signatureQueueRoomId], references: [id])
  signatureQueueRoomId String?
}

model SignatureCoor {
  id                 String             @id @default(uuid())
  xAxis              Int
  yAxis              Int
  width              Int
  height             Int
  timestamp          DateTime           @default(now())
  SignatureRequest   SignatureRequest? @relation(fields: [signatureRequestId], references: [id])
  signatureRequestId String?
}

model SignatureRecord {
  id                                                                      String            @id @default(uuid())
  request                                                                 SignatureRequest @relation(fields: [signatureRequestId], references: [id])
  signatureRequestId                                                      String
  lineId                                                                  String
  signature          String // <-- Store the cryptographic signature here
  userId             String // <-- Who signed it
  timestamp                                                               DateTime          @default(now())
}

model SignatureRequest {
  id              String             @id @default(uuid())
  subject         String
  desc            String?            @default("N/A")
  size            String             @default("A4")
  file            SignatureFile[]
  timestamp       DateTime           @default(now())
  fromUser        User?             @relation(name: "fromUser", fields: [fromUserId], references: [id])
  toUser          User?             @relation(name: "toUser", fields: [toUserId], references: [id])
  fromUserId      String?
  toUserId        String?
  status          Int                @default(0)
  target          SignatureCoor[]
  SignatureRecord SignatureRecord[]
}

model SignatureFile {
  id                 String            @id @default(uuid())
  url                String
  fileName           String
  fileSize           String
  fileType           String
  timestamp          DateTime          @default(now())
  SignatureRequest   SignatureRequest @relation(fields: [signatureRequestId], references: [id])
  signatureRequestId String
}

model AdminModule {
  id        String    @id @default(uuid())
  name      String
  createdAt DateTime  @default(now())
  timestamp DateTime  @default(now())
}

model AdminInbox {
  id        String    @id @default(uuid())
  type      String
  title     String
  content   String
  createdAt DateTime  @default(now())
  sender    User     @relation(fields: [userId], references: [id])
  path      String?
  isRead    Boolean   @default(false)
  userId    String
}

model Test {
  id        String    @id @default(uuid())
  encrypt   Bytes
  test      Bytes
  timestamp DateTime  @default(now())
}

model MedicineStorage {
  id                    String                   @id @default(uuid())
  refNumber             String                   @unique
  name                  String
  desc                  String
  timestamp             String
  status                Int                      @default(1)
  unit                  Department              @relation(fields: [departmentId], references: [id], onDelete: SetDefault)
  line                  Line                    @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId                String
  stocks                MedicineStock[]
  departmentId          String
  MedicineStorageAccess MedicineStorageAccess[]
  MedicineTransaction   MedicineTransaction[]
}

model MedicineNotification {
  id           String       @id @default(uuid())
  path         String?
  view         Int          @default(0)
  phase        Int          @default(1)
  title        String
  message      String
  type         Int          @default(1)
  line         Line        @relation(fields: [lineId], references: [id], onDelete: Cascade)
  unit         Department? @relation(fields: [departmentId], references: [id], onDelete: SetNull)
  user         User        @relation(fields: [userId], references: [id])
  timestamp    DateTime     @default(now())
  userId       String
  departmentId String?
  lineId       String
}

model MedicineStorageAccess {
  id                String           @id @default(uuid())
  medicineStorage   MedicineStorage @relation(fields: [medicineStorageId], references: [id])
  medicineStorageId String
  previlege         Int              @default(0) //0 - View, 1 - Edit
  user              User            @relation(fields: [userId], references: [id])
  userId            String
  timestamp         DateTime         @default(now())
}

model MedicineLogs {
  id        String    @id @default(uuid())
  action    Int       @default(0) //0 - Dispense, 1 -
  message   String
  user      User     @relation(fields: [userId], references: [id])
  timestamp DateTime  @default(now())
  userId    String
  line      Line?    @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId    String?
}

model Medicine {
  id               String              @id @default(uuid())
  serialNumber     String
  name             String
  desc             String?             @default("None")
  phase            Int                 @default(0)
  line             Line               @relation(fields: [lineId], references: [id], onDelete: Cascade)
  PrecribeMedicine PrecribeMedicine[]
  timestamp        DateTime            @default(now())
  MedicineHistory  MedicineHistory[]
  MedicineTrack    MedicineTrack[]
  MedicineStock    MedicineStock[]
  lineId           String
}

model MedicineTransaction {
  id                      String                     @id @default(uuid())
  prescription            Prescription?             @relation(fields: [prescriptionId], references: [id])
  prescriptionId          String?
  quantity                Int
  unit                    String
  remark                  Int                        @default(0)
  storage                 MedicineStorage?          @relation(fields: [medicineStorageId], references: [id])
  user                    User?                     @relation(fields: [userId], references: [id], onDelete: Cascade)
  timestamp               DateTime                   @default(now())
  userId                  String?
  medicineStorageId       String?
  line                    Line                      @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId                  String
  MedicineTransactionItem MedicineTransactionItem[]
}

model MedicineTransactionItem {
  id                    String               @id @default(uuid())
  presTranscription     MedicineTransaction @relation(fields: [medicineTransactionId], references: [id], onDelete: Cascade)
  medicineTransactionId String
  prescribeMed          PrecribeMedicine?   @relation(fields: [precribeMedicineId], references: [id])
  precribeMedicineId    String?              @unique
  prescribeQuantity     Int                  @default(0)
  releasedQuantity      Int                  @default(0)
}

model MedicineQuality {
  id              String          @id @default(uuid())
  quantity        Int             @default(1)
  unit            String          @default("pcs")
  perUnit         Int             @default(1)
  stock           MedicineStock? @relation(fields: [medicineStockId], references: [id], onDelete: Cascade)
  medicineStockId String?         @unique
  timestamp       DateTime        @default(now())
}

model MedicineStock {
  id                String                @id @default(uuid())
  medicine          Medicine             @relation(fields: [medicineId], references: [id])
  medicineId        String
  quarter           Int
  threshold         Int                   @default(5)
  actualStock       Int                   @default(0)
  timestamp         DateTime              @default(now())
  stock             MedicineQuality?
  expiration        DateTime?
  line              Line                 @relation(fields: [lineId], references: [id])
  price             MedicinePriceTrack[]
  MedicineStorage   MedicineStorage?     @relation(fields: [medicineStorageId], references: [id])
  medicineStorageId String?
  lineId            String
}

model MedicineTrack {
  id         String    @id @default(uuid())
  medicine   Medicine @relation(fields: [medicineId], references: [id], onDelete: Cascade)
  medicineId String
  stock      Int       @default(0)
  quarter    Int
  timestamp  DateTime  @default(now())
}

model MedicineHistory {
  id         String    @id @default(uuid())
  medicine   Medicine @relation(fields: [medicineId], references: [id], onDelete: Cascade)
  medicineId String
  action     Int       @default(0)
  stock      Int       @default(0)
  message    String    @default("N/A")
  timestamp  DateTime  @default(now())
}

model MedicinePriceTrack {
  id              String          @id @default(uuid())
  value           Float           @default(0.0)
  timestamp       DateTime        @default(now())
  MedicineStock   MedicineStock? @relation(fields: [medicineStockId], references: [id], onDelete: Cascade)
  medicineStockId String?
}

model Prescription {
  id                  String                  @id @default(uuid())
  refNumber           String
  presMed             PrecribeMedicine[]
  condtion            String?
  firstname           String?
  lastname            String?
  street              String?
  age                 String                  @default("N/A")
  barangay            Barangay?              @relation(fields: [barangayId], references: [id], onDelete: SetNull)
  barangayId          String?
  municipal           Municipal?             @relation(fields: [municipalId], references: [id], onDelete: SetNull)
  municipalId         String?
  province            Province?              @relation(fields: [provinceId], references: [id], onDelete: SetNull)
  provinceId          String?
  processBy           User                   @relation(name: "processBy", fields: [userId], references: [id])
  respondedBy         User?                  @relation(name: "respondedBy", fields: [respondedByUserId], references: [id], onDelete: Cascade)
  userId              String
  respondedByUserId   String?
  status              Int                     @default(0)
  comment             PrescriptionComment[]
  remark              Int                     @default(0)
  progress            PrescriptionProgress[]
  timestamp           DateTime                @default(now())
  line                Line                   @relation(fields: [lineId], references: [id])
  assets              PrescriptionAsset[]
  MedicineTransaction MedicineTransaction[]
  lineId              String
}

model PrescriptionAsset {
  id             String        @id @default(uuid())
  refNumber      String?
  remark         Int           @default(0)
  precription    Prescription @relation(fields: [prescriptionId], references: [id], onDelete: Cascade)
  prescriptionId String
  file_url       String?
  file_size      String?
  file_type      String?
  timestamp      DateTime      @default(now())
}

model PrescriptionProgress {
  id             String         @id @default(uuid())
  step           Int            @default(0)
  comment        String?
  timestamp      DateTime       @default(now())
  Prescription   Prescription? @relation(fields: [prescriptionId], references: [id], onDelete: Cascade)
  prescriptionId String?
}

model PrescriptionComment {
  id                        String                       @id @default(uuid())
  status                    Int                          @default(0)
  prescriptionSender        User                        @relation(name: "prescriptionSender", fields: [prescriberId], references: [id])
  prescriberId              String
  message                   String?
  Prescription              Prescription?               @relation(fields: [prescriptionId], references: [id], onDelete: Cascade)
  prescriptionId            String?
  timestamp                 DateTime                     @default(now())
  userId                    String
  User                      User                        @relation(fields: [userId], references: [id])
  PrescriptionCommentAssets PrescriptionCommentAssets[]
}

model PrescriptionCommentAssets {
  id                    String                @id @default(uuid())
  file_url              String
  file_name             String
  file_type             Int
  file_size             String
  timestamp             DateTime              @default(now())
  PrescriptionComment   PrescriptionComment? @relation(fields: [prescriptionCommentId], references: [id])
  prescriptionCommentId String?
}

model PrecribeMedicine {
  id                      String                    @id @default(uuid())
  medicine                Medicine?                @relation(fields: [medicineId], references: [id], onDelete: SetNull)
  medicineId              String?
  timestamp               DateTime                  @default(now())
  desc                    String?
  quantity                Int                       @default(1)
  releaseQuantity         Int                       @default(1)
  Prescription            Prescription?            @relation(fields: [prescriptionId], references: [id], onDelete: Cascade)
  prescriptionId          String?
  remark                  String                    @default("Pending")
  comments                String?
  MedicineTransactionItem MedicineTransactionItem?
}

model PrescriptionMedicine {
  id String  @id @default(uuid())
}

model JobPost {
  id                   String                 @id @default(uuid())
  position             Position              @relation(fields: [positionId], references: [id], onDelete: Cascade)
  salaryGrade          SalaryGrade?          @relation(fields: [salaryGradeId], references: [id], onDelete: SetNull)
  salaryGradeId        String?
  hideSG               Boolean                @default(false)
  slot                 Int
  status               Int
  updateAt             DateTime               @default(now())
  showApplicationCount Boolean
  desc                 String?                @default("N/A")
  application          Application[]
  requirements         JobPostRequirements[]
  timestamp            DateTime               @default(now())
  positionId           String
  location             String
  applicationInquiries ApplicationInquiry[]
  line                 Line?                 @relation(fields: [lineId], references: [id], onDelete: Cascade)
  lineId               String?
}

model JobPostRequirements {
  id        String           @id @default(uuid())
  title     String
  desc      String?
  asset     JobPostAssets[]
  jobPost   JobPost?        @relation(fields: [jobPostId], references: [id])
  jobPostId String?
}

model JobPostAssets {
  id                    String                @id @default(uuid())
  fileType              String
  fileSize              String
  fileName              String
  fileUrl               String?
  filePublicId          String
  timestamp             DateTime              @default(now())
  jobPostRequirements   JobPostRequirements? @relation(fields: [jobPostRequirementsId], references: [id], onDelete: Cascade)
  jobPostRequirementsId String?
}

model ApplicationInquiry {
  id        String   @id @default(uuid())
  jobPost   JobPost @relation(fields: [jobPostId], references: [id], onDelete: Cascade)
  jobPostId String
}

model LineGeneralAssets {
  id        String    @id @default(uuid())
  line      Line     @relation(fields: [lineId], references: [id])
  file_url  String
  file_name String
  file_size String
  file_type String
  timestamp DateTime  @default(now())
  lineId    String
}

model Otp {
  code      Int       @id
  timestamp DateTime  @default(now())
}
